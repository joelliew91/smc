plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=5)
plot(t)
plot(t,lty=2)
plot(t,type='l')
plot(t[1:100],type='l')
plot(t[1:200],type='l')
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=5)
plot(t[1:100],type='l')
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=5)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=5)
plot(t)
t = get_sig_ema_mo(para,GSPC,lb=30)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=60)
plot(t)
t = get_sig_ema_mo(para,GSPC,lb=120)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120)
plot(t0)
plot(t)
t = get_sig_ema_mo(para,GSPC,lb=60)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=25)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=25)
plot(t)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=25)
t = get_sig_ema_mo(para,GSPC,lb=120)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120)
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=1)
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=0.5)
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=1.5)
sum(para$mu>1.5)
sum(para$mu>1)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_ema_mo(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=120,threshold=0)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=120,threshold=0)
t = get_sig_sma(para,GSPC,lb=90,threshold=0)
t = get_sig_sma(para,GSPC,lb=90,threshold=0.2)
g = get_sig_sma_opt(para,GSPC)
which(g$buy==max(g$buy),arr.ind=T)
b=get_sig_sma(para,GSPC,threshold = 0.8,lb=60)
t = get_sig_sma(para,GSPC,lb=90,threshold=0.2)
t = get_sig_sma(para,GSPC,lb=60,threshold=0.8)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=60,threshold=0.8)
Return.annualized(diff(t$strat_buy))/maxDrawdown(diff(t$strat_buy))
Return.annualized(diff(t$strat_buy[1:500]))/maxDrawdown(diff(t$strat_buy[1:500]))
Return.annualized(diff(t$strat_buy[500:2309]))/maxDrawdown(diff(t$strat_buy[500:2309]))
Return.annualized(diff(s$strat_buy[500:2309]))/maxDrawdown(diff(s$strat_buy[500:2309]))
Return.annualized(diff(s$strat_sell[500:2309]))/maxDrawdown(diff(s$strat_sell[500:2309]))
head(s)
which(g$sell==max(g$sell),arr.ind=T)
s = get_sig_sma(para,GSPC,thres=0.9,lb=50)
s = get_sig_sma(para,GSPC,thres=0.9,lb=58)
Return.annualized(diff(s$strat_sell[500:2309]))/maxDrawdown(diff(s$strat_sell[500:2309]))
Return.annualized(diff(s$strat_sell[1:500]))/maxDrawdown(diff(s$strat_sell[1:500]))
head(p)
head(port)
p = cbind(b$strat_buy,s$strat_sell,b$strat_buy+s$strat_sell)
names(p)
names(p)[3] = 'port'
plot(p$port)
p = cbind(b$strat_buy,s$strat_sell,b$strat_buy+s$strat_sell,b$bnh)
names(p)
names(p)[3] = 'port'
plot(as.zoo(p),plot.type='single',col=c('blue','red','black','magenta'),main='Strat Returns vs BnH Returns',ylab='Cumulative Eq',xlab='Time');legend('topleft',col=c('blue','red','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=60,threshold=0.8)
source('~/Desktop/smc/SP500/ts.R')
t = get_sig_sma(para,GSPC,lb=60,threshold=0.8)
source('~/Desktop/smc/SP500/ts.R')
g = get_sig_sma_opt(para,GSPC)
which(g$buy==max(g$buy),arr.ind=T)
b = get_sig_sma(para,GSPC,lb=58,threshold=0.8)
b = get_sig_sma(para,GSPC,lb=60,threshold=0.8)
which(g$sell==max(g$sell),arr.ind=T)
s = get_sig_sma(para,GSPC,lb=51,threshold=0.9)
eq = cbind(b$strat_buy,s$strat_sell,b$strat_buy+s$strat_sell,b$bnh)
names(eq)
names(eq)[3] = 'port'
plot(as.zoo(eq),plot.type='single',col=c('red','blue','black','magenta'),main='Strat Returns vs BnH Returns(SMA)',ylab='Cumulative Eq',xlab='Time')
legend('topleft',col=c('red','blue','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
g_ema = get_sig_ema_opt(para,GSPC)
max(g_ema$buy)
max(g_ema$sell)
which(g_ema$buy==max(g_ema$buy),arr.ind=T)
which(g_ema$sell==max(g_ema$sell),arr.ind=T)
b_ema = get_sig_ema(para,GSPC,threshold=0.8,lb=6)
s_ema = get_sig_ema(para,GSPC,threshold=0.9,lb=4)
eq_ema = cbind(b_ema$strat_buy,s_ema$strat_sell,b_ema$strat_buy+s_ema$strat_sell,b$bnh)
plot(as.zoo(eq_ema),plot.type='single',col=c('red','blue','black','magenta'),main='Strat Returns vs BnH Returns(SMA)',ylab='Cumulative Eq',xlab='Time')
legend('topleft',col=c('red','blue','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
plot(as.zoo(eq_ema),plot.type='single',col=c('red','blue','black','magenta'),main='Strat Returns vs BnH Returns(SMA)',ylab='Cumulative Eq',xlab='Time')
legend('bottomright',col=c('red','blue','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
source('~/Desktop/smc/SP500/ts.R')
g_ema = get_sig_ema_opt(para,GSPC)
max(g_ema)
max(g_ema$buy)
which(g_ema$buy==max(g_ema$buy),arr.ind=T)
which(g_ema$sell==max(g_ema$sell),arr.ind=T)
b_ema = get_sig_ema(para,GSPC,threshold=0.4,lb=3)
s_ema = get_sig_ema(para,GSPC,threshold=0.7,lb=5)
eq_ema = cbind(b_ema$strat_buy,s_ema$strat_sell,b_ema$strat_buy+s_ema$strat_sell,b$bnh)
plot(as.zoo(eq_ema),plot.type='single',col=c('red','blue','black','magenta'),main='Strat Returns vs BnH Returns(SMA)',ylab='Cumulative Eq',xlab='Time')
legend('bottomright',col=c('red','blue','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
plot(as.zoo(eq_ema),plot.type='single',col=c('red','blue','black','magenta'),main='Strat Returns vs BnH Returns(EMA)',ylab='Cumulative Eq',xlab='Time')
legend('bottomright',col=c('red','blue','black','magenta'),lwd=c(2,2,2),lty=c(1,1,1),c('Buy','Sell','Comb','BnH'))
Return.annualized(diff(eq_ema))/maxDrawdown(diff(eq_ema))
Return.annualized(diff(eq_ema[1:500]))/maxDrawdown(diff(eq_ema[1:500]))
Return.annualized(diff(eq_ema[500:2309]))/maxDrawdown(diff(eq_ema[500:2309]))
plot_ly(z=g_ema$buy,xlim=mu_threshold,ylim=Lookback)
plot_ly(z=g_ema$buy,xlim=Lookback,ylim=mu_threshold)
plot_ly(z=g_ema$buy,xlim=Lookback,ylim=mu_threshold,type='contour')
plot_ly(z=g_ema$sell,xlim=Lookback,ylim=mu_threshold,type='contour')
plot_ly(z=g_ema$buy,xlim=Lookback,ylim=mu_threshold,type='contour')
source('~/Desktop/smc/SP500/ts.R')
eq_mo = get_sig_mo(para,GSPC)
head(dy)
hist(dy,breaks=100)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
test = get_sig_mo_opt(para,GSPC)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
test = get_sig_mo_opt(para,GSPC)
head(test)
apply(test,2,max)
is.na(test)
f = test[,!is.na(test[,1])]
f = test[!is.na(test[,1]),]
f = f[!is.na(f[,4]),]
f = f[!is.na(f[,5]),]
f = f[!is.na(f[,6]),]
is.na(f)
max(f[,4])
max(f[,5])
max(f[,6])
max(f[,4])
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
test
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
test
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
head(test)
max(test[,5])
test[,5]==max(test[,5])
test[test[,5]==max(test[,5]),]
a = 0.1*b$strat_buy+0*s$strat_sell0.2*b_ema$strat_buy0.7*s_ema$strat_sell
a = 0.1*b$strat_buy+0*s$strat_sell+0.2*b_ema$strat_buy0.7*s_ema$strat_sell
a = 0.1*b$strat_buy+0*s$strat_sell+0.2*b_ema$strat_buy+0.7*s_ema$strat_sell
plot(a)
q = test[order(test[,5]),]
head(q)
q = test[order(test[,5]),]
head(q)
q = test[order(test[,5],increasing),]
?order
q = test[order(test[,5],decreasing=T),]
head(q)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
q = test[order(test[,5],test[,6],decreasing = T),]
head(q,20)
q = test[order(test[,6],test[,5],decreasing = T),]
head(q,20)
q = test[order(test[,5],test[,6],decreasing = T),]
head(q,20)
q = 0.1*b$strat_buy + 0.2*b_ema$strat_buy+0.7*s_ema$strat_sell
plot(as.zoo(q))
plot(as.zoo(q),main='Optimised Portfolio of Weighted Strategies',ylab='Cumulative Eq',xlab='Time')
q = cbind(q,b$strat_buy,b_ema$strat_buy,s_ema$strat_sell,s$strat_sell)
plot(as.zoo(q),plot.type='single',main='Optimised Portfolio of Weighted Strategies',ylab='Cumulative Eq',xlab='Time')
plot(as.zoo(q),plot.type='single',main='Optimised Portfolio of Weighted Strategies',ylab='Cumulative Eq',xlab='Time',col=c('blue','red','black','magenta'))
legend('topleft',col=c('blue','red','black','magenta'),lwd=c(2,2,2,2),lty=c(1,1,1,1),c('Opt Port','SMA Buy','EMA Buy','SMA Sell','EMA Sell'))
plot(as.zoo(q),plot.type='single',main='Optimised Portfolio of Weighted Strategies',ylab='Cumulative Eq',xlab='Time',col=c('blue','red','black','magenta','green'))
plot(as.zoo(q),plot.type='single',main='Optimised Portfolio of Weighted Strategies',ylab='Cumulative Eq',xlab='Time',col=c('blue','red','black','magenta','darkgreen'))
legend('topleft',col=c('blue','red','black','magenta','darkgreen'),lwd=c(2,2,2,2,2),lty=c(1,1,1,1,1),c('Opt Port','SMA Buy','EMA Buy','SMA Sell','EMA Sell'))
apply(apply(q,2,diff),2,Return.annualized)/apply(apply(q,2,diff),2,maxDrawdown)
apply(apply(q[800:2309],2,diff),2,Return.annualized)/apply(apply(q[800:2309],2,diff),2,maxDrawdown)
apply(apply(s$bnh[800:2309],2,diff),2,Return.annualized)/apply(apply(s$bnh[800:2309],2,diff),2,maxDrawdown)
head(q,50)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,30)
w = test[order(test[,6],test[,5],decreasing = T),]
head(w,30)
head(w,50)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,50)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,30)
source('~/Desktop/smc/SP500/ts.R')
w = test[order(test[,5],test[,6],decreasing = T),]
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,30)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,30)
source('~/Desktop/smc/SP500/ts.R')
w = test[order(test[,5],test[,6],decreasing = T),]
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w)
seq(10,29,by=10)
seq(10,to=29,by=10)
?seq
source('~/Desktop/smc/SP500/ts.R')
seq(101,2309,by=100)
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,from=1,to=200)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,20)
source('~/Desktop/smc/SP500/ts.R')
eq_port = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
head(b,40)
head(b,100)
source('~/Desktop/smc/SP500/ts.R')
length(diff(b$strat_buy))
length(b$strat_buy)
sum(cumsum(diff(b$strat_buy))!=b$strat_buy)
sum(cumsum(diff(b$strat_buy))==b$strat_buy)
diff(b$strat_buy)[1]
e=diff(b$strat_buy)
e[1] = 0
sum(cumsum(e)==b$strat_buy)
source('~/Desktop/smc/SP500/ts.R')
test = weighted_portfolio(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,from=1,to=200)
w = test[order(test[,5],test[,6],decreasing = T),]
head(w,20)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
plot(ropt)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
plot(ropt)
length(ropt)
tail(ropt)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
plot(ropt)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
plot(ropt)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
warnings()
plot(ropt$eq)
head(ropt$w)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
head(ropt$eq)
head(b$bnh)
head(b$bnh[100:2309])
eq = cbind(ropt$eq,b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
plot(as.zoo(eq),plot.type = 'single')
head(eq)
tail(eq)
plot(as.zoo(eq[101:2300]),plot.type = 'single')
plot(as.zoo(eq[,101:2300]),plot.type = 'single')
plot(as.zoo(eq[101:2300],),plot.type = 'single')
plot(as.zoo(eq[101:2300,]),plot.type = 'single')
plot(as.zoo(eq),plot.type = 'single')
eq = eq[101:2300]
head(eq)
tail(eq)
eq = cbind(ropt$eq,b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell)
eq = eq[101:2300,]
head(eq)
tail(eq)
plot(as.zoo(eq),plot.type = 'single')
eq = cbind(ropt$eq,b$bnh)
plot(as.zoo(eq))
plot(as.zoo(ropt$eq))
plot(ropt$eq)
plot(as.zoo(ropt$eq))
plot(as.zoo(ropt$eq),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio')
plot(as.zoo(b$bnh),add=T,col='blue')
plot(as.zoo(ropt$eq),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio')
lines(as.zoo(b$bnh),col='blue')
plot(as.zoo(ropt$eq),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio',ylim=c(-0.5,2.5))
lines(as.zoo(b$bnh),col='blue')
legend('topleft',col=c('black','blue'),lwd=c(2,2),lty=c(1,1),c('Opt Port','BnH'))
plot(as.zoo(ropt$eq),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio',ylim=c(-0.5,2.5),lwd=2)
lines(as.zoo(b$bnh),col='blue')
legend('topleft',col=c('black','blue'),lwd=c(2,2),lty=c(1,1),c('Opt Port','BnH'))
plot(as.zoo(ropt$eq),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio',ylim=c(-0.5,2.5),lwd=2,col='red')
lines(as.zoo(b$bnh),col='blue')
legend('topleft',col=c('red','blue'),lwd=c(2,2),lty=c(1,1),c('Opt Port','BnH'))
df = data.frame(iteration=1:dim(ropt$w)[1],ropt$w)
head(df)
source('~/Desktop/smc/SP500/ts.R')
ropt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
df = data.frame(iteration=1:dim(ropt$w)[1],ropt$w)
head(ropt$w)
class(ropt$w)
df = as.data.frame(iteration=1:dim(ropt$w)[1],ropt$w)
head(df)
dim(ropt$w)
dim(ropt$w)[1]
iter=1:dim(ropt$w)[1]
iter
f = cbind(iter,ropt$w)
head(f)
df = as.data.frame(f)
head(df)
names(df)
names(df) = c('iter','w1','w2','w3','w4')
names(df) = c('iteration','w1','w2','w3','w4')
df <- melt(df ,  id.vars = 'iteration', variable.name = 'w')
library(ggplot2)
library(reshape)
df <- melt(df ,  id.vars = 'iteration', variable.name = 'w')
?as.data.frame
df = data.frame(iteration=1:dim(ropt$w)[1],ropt$w)
df = data.frame(ropt$w)
head(ropt$w)
ropt$w[1]
ropt$w[2]
ropt$w[3]
plot(ropt$w)
plot(ropt$w[,1],lty=1)
plot(ropt$w[,1],lty=2)
plot(ropt$w[,1],type='l')
liens(ropt$w[,2])
lines(ropt$w[,2])
Return.annualized(diff(ropt$eq))/maxDrawdown(diff(ropt$eq))
class(ropt$eq)
Return.annualized(diff(as.zoo(ropt$eq)))/maxDrawdown(diff(as.zoo(ropt$eq)))
ropt$eq[1]
ropt$eq[100]
ropt$eq[101]
ropt$eq[102]
ropt$eq[13]
ropt$eq[103]
ropt$eq[104]
ropt$eq[105]
ropt$eq[106]
ropt$eq[107]
ropt$eq[108]
ropt$eq[109]
s1 = b$strat_buy
s2 = s$strat_sell
s3 = b_ema$strat_buy
s4 = s_ema$strat_sell
p = (0.6*diff(s1) + 0.1*diff(s2) +0*diff(s3)+0.3*diff(s4))[101:200]
head(p)
p[1]
p[100]
p[99]
s1[99]
p = (0.6*diff(s1) + 0.1*diff(s2) +0*diff(s3)+0.3*diff(s4))[101:200]
tail(p)
head(p)
ropt$eq[100:110]
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
length(s1)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
source('~/Desktop/smc/SP500/ts.R')
pt = rolling_opt(b$strat_buy,s$strat_sell,b_ema$strat_buy,s_ema$strat_sell,n=20)
plot(pt$eq)
plot(as.zoo(cbind(pt$eq,b$bnh)))
plot(as.zoo(cbind(pt$eq,b$bnh)),plot.type = 'single')
plot(as.zoo(cbind(pt$eq,b$bnh)),plot.type = 'single',col=c('red','blue'))
plot(as.zoo(cbind(pt$eq,b$bnh)),plot.type = 'single',col=c('red','blue'),xlab='Time',ylab='Cumulative Eq',main='Optimised Portfolio vs BnH')
source('~/Desktop/smc/SP500/ts.R')
legend('topleft',lwd=c(2,2),lty=c(1,1),col=c('red','blue'),c('Opt Port','BnH'))
Return.annualized(diff(pt$eq))
Return.annualized(diff(pt$eq))/maxDrawdown(diff(pt$eq))
Return.annualized(diff(s$bnh))/maxDrawdown(diff(s$bnh))
getwd()
setwd('../')
getwd()
acc = read.csv('acc_rates.csv',header=T)
head(acc)
plot(acc$zeta,x=acc$Iteration,type='l')
par(mfrow=c(4,3))
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$ESS,x=acc$Iteration,type='l',xlab='Iteration',ylab='ESS',main='Plot of ESS vs Iteration')
plot(acc$mu,x=acc$Iteration,type='l',xlab='Iteration',ylab='mu',main='Plot of mu vs Iteration')
plot(acc$gamma,x=acc$Iteration,type='l',xlab='Iteration',ylab='gamma',main='Plot of gamma vs Iteration')
plot(acc$sigma_j,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_j',main='Plot of Sigma_j vs Iteration')
plot(acc$sigma_v,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_v',main='Plot of Sigma_v vs Iteration')
plot(acc$rho,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_v',main='Plot of Sigma_v vs Iteration')
plot(acc$rho,x=acc$Iteration,type='l',xlab='Iteration',ylab='rho',main='Plot of rho vs Iteration')
plot(acc$k,x=acc$Iteration,type='l',xlab='Iteration',ylab='k',main='Plot of k vs Iteration')
plot(acc$v_p,x=acc$Iteration,type='l',xlab='Iteration',ylab='vt',main='Plot of vt vs Iteration')
plot(acc$lat_z,x=acc$Iteration,type='l',xlab='Iteration',ylab='lat_z',main='Plot of lat_z vs Iteration')
plot(acc$lat_v,x=acc$Iteration,type='l',xlab='Iteration',ylab='lat_v',main='Plot of lat_v vs Iteration')
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$ESS,x=acc$Iteration,type='l',xlab='Iteration',ylab='ESS',main='Plot of ESS vs Iteration')
plot(acc$mu,x=acc$Iteration,type='l',xlab='Iteration',ylab='mu',main='Plot of mu vs Iteration')
plot(acc$gamma,x=acc$Iteration,type='l',xlab='Iteration',ylab='gamma',main='Plot of gamma vs Iteration')
plot(acc$sigma_j,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_j',main='Plot of Sigma_j vs Iteration')
plot(acc$sigma_v,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_v',main='Plot of Sigma_v vs Iteration')
plot(acc$rho,x=acc$Iteration,type='l',xlab='Iteration',ylab='rho',main='Plot of rho vs Iteration')
plot(acc$k,x=acc$Iteration,type='l',xlab='Iteration',ylab='k',main='Plot of k vs Iteration')
plot(acc$v_p,x=acc$Iteration,type='l',xlab='Iteration',ylab='vt',main='Plot of vt vs Iteration')
plot(acc$lat_z,x=acc$Iteration,type='l',xlab='Iteration',ylab='lat_z',main='Plot of lat_z vs Iteration')
par(mfrow=c(1,1))
plot(acc$ESS)
plot(acc$ESS,type='l')
par(mfrow=c(4,3))
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$ESS,x=acc$Iteration,type='l',xlab='Iteration',ylab='ESS',main='Plot of ESS vs Iteration')
plot(acc$mu,x=acc$Iteration,type='l',xlab='Iteration',ylab='mu',main='Plot of mu vs Iteration')
plot(acc$gamma,x=acc$Iteration,type='l',xlab='Iteration',ylab='gamma',main='Plot of gamma vs Iteration')
plot(acc$sigma_j,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_j',main='Plot of Sigma_j vs Iteration')
par(mfrow=c(4,3))
par(mfrow=c(1,1))
plot(acc$sigma_j,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_j',main='Plot of Sigma_j vs Iteration')
par(mfrow=c(4,3))
plot(acc$zeta,x=acc$Iteration,type='l',xlab='Iteration',ylab='zeta',main='Plot of Zeta vs Iteration')
plot(acc$ESS,x=acc$Iteration,type='l',xlab='Iteration',ylab='ESS',main='Plot of ESS vs Iteration')
plot(acc$mu,x=acc$Iteration,type='l',xlab='Iteration',ylab='mu',main='Plot of mu vs Iteration')
plot(acc$gamma,x=acc$Iteration,type='l',xlab='Iteration',ylab='gamma',main='Plot of gamma vs Iteration')
plot(acc$sigma_j,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_j',main='Plot of Sigma_j vs Iteration')
plot(acc$sigma_v,x=acc$Iteration,type='l',xlab='Iteration',ylab='Sigma_v',main='Plot of Sigma_v vs Iteration')
plot(acc$rho,x=acc$Iteration,type='l',xlab='Iteration',ylab='rho',main='Plot of rho vs Iteration')
plot(acc$k,x=acc$Iteration,type='l',xlab='Iteration',ylab='k',main='Plot of k vs Iteration')
plot(acc$v_p,x=acc$Iteration,type='l',xlab='Iteration',ylab='vt',main='Plot of vt vs Iteration')
plot(acc$lat_z,x=acc$Iteration,type='l',xlab='Iteration',ylab='lat_z',main='Plot of lat_z vs Iteration')
plot(acc$lat_v,x=acc$Iteration,type='l',xlab='Iteration',ylab='lat_v',main='Plot of lat_v vs Iteration')
